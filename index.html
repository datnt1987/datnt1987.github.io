<!DOCTYPE html>
<html>

<body>

  <script>
    var pic = document.getElementById('open_camera');
    var result;
    function openCamera() {
      window.ZaloPay.openCamera(function (res) {
        alert('takenID: ' + res.data.takenURI);
        // loadBlobImage(res.data.takenURI);
        // pic.src = res.data.takenURI;
        var stringToReplace = reader.result;
        stringToReplace = stringToReplace.replace('data:base64,', 'data:image\/jpeg;base64,');
        pic.src = stringToReplace;
        // img.src = 'https://cdn.sstatic.net/stackexchange/img/logos/so/so-icon.png';

      });
    }

    function chooseImage() {
      window.ZaloPay.chooseImage(function (res) {
        alert('Image local ids: ' + res.data.localIds)
      });
    }

    function getCameraImgResult() {
      var stringToReplace = reader.result;
      stringToReplace = stringToReplace.replace('data:base64,', 'data:image\/jpeg;base64,');
    }



    function loadBlobImage(url) {
      var xhr = new XMLHttpRequest()
      xhr.responseType = 'blob';
      xhr.onreadystatechange = function (event) {
        if (event.target.readyState == 4) {
          if (event.target.status == 200 || event.target.status == 0) {
            var blob = this.response;
          } else {
            console.error('Unable to download the blob');
          }
        }
      };
      xhr.open('GET', url, true);
      xhr.send();
    }
  </script>

  <button type="openCamera" onclick="openCamera()">open camera1</button>
  <button type="chooseImage" onclick="chooseImage()">choose image</button>
  <!-- <img src="file:///vn.com.vng.zalopay.sb1.provider/zpimages/image-20181123_16:01:33.jpg" /> -->
  <img id="open_camera" alt="" width="500" height="150" />

  <script src="js/zalopay.js"></script>
  <script src="js/zalopay-internal.js"></script>
</body>

</html>